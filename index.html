<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <link type="text/css" rel="stylesheet" href="animated-gameboy-in-css.css">
  <link type="text/css" rel="stylesheet" href="index.css">
  <link href='https://fonts.googleapis.com/css?family=Avenir' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Gelasio" rel="stylesheet" type='text/css'>
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="jquery.blink.js"></script>
  <link rel="stylesheet" type="text/css" href="./csshake.min.css">
  <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

  <!-- Mario Level Setup -->
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <!-- <link rel="stylesheet" type="text/css" href="css/reset.css"> -->
  <script src="js/View.js"></script>
  <script src="js/GameUI.js"></script>
  <script src="js/mainGame/GameSound.js"></script>
  <script src="js/mainGame/Element.js"></script>
  <script src="js/mainGame/PowerUp.js"></script>
  <script src="js/mainGame/Enemy.js"></script>
  <script src="js/mainGame/Bullet.js"></script>
  <script src="js/mainGame/Mario.js"></script>
  <script src="js/mainGame/Score.js"></script>
  <script src="js/mainGame/MarioGame.js"></script>
  <script src="js/levelEditor/Storage.js"></script>
  <script src="js/levelEditor/Editor.js"></script>
  <script src="js/levelEditor/CreatedLevels.js"></script>
  <script src="js/MarioMaker.js"></script>
  <script src="js/Preloader.js"></script>
  <script src="js/confetti.js"></script>

  <link rel='icon' href='favicon.png' />
  <title>Super Connie 64</title>

</head>

<body>
  <div id="everything-wrapper-desktop">
    <div id="banner">
      <div id="intro-header">
        <img id="intro-img" src='./images/first_image.png' />
      </div>
      <div id="banner-img">
        <img src="./images/titlefont.png" alt="image"/>
      </div>
      <div id="banner-text">
        <p style='font-size: 14px;'>
          A platform game exploring the journey of Connie Liu: the engineer turned educator turned entrepreneur.
        </p>
        <p style='font-size: 14px;'>
          <u>Mission:</u> Help Connie disrupt the world of education!
        </p>
        <p style='font-size: 14px;'>
          <u>Instructions:</u> Collect all items by hitting the question blocks. Press "Start" below to begin.
        </p>
        <div id="instructions-div">
          <img id="instructions" src='./images/instructions.png' />
        </div>
      </div>
    </div>
    <div id="start-button-div">
      <img id="start-button" />
    </div>
    <div id="gameboy" class="green" style="display: none;">
      <div id="canvas"></div>
      <div id="border"></div>
      <div id="border-top"></div>
      <div id="border-left"></div>
      <div id="border-bottom"></div>
      <div id="border-right"></div>
      <div id="screw-small-right" class="screw small"></div>
      <div id="screw-small-left" class="screw small"></div>
      <div id="screw-large-right" class="screw large"></div>
      <div id="screw-large-left" class="screw large"></div>
      <div id="backboard"></div>
      <div id="motherboard"></div>
      <div id="motherboard-capacitors" class="capacitors"></div>
      <div id="chip-short" class="chip"></div>
      <div id="chip-diagonal" class="chip"></div>
      <div id="chip-tall" class="chip"></div>
      <div id="chip-capacitors" class="capacitors"></div>
      <div id="contrast-knob"></div>
      <div id="link-port"></div>
      <div id="circuit-bottom" class="circuit"></div>
      <div id="circuit-top" class="circuit"></div>
      <div id="transistors"></div>
      <div id="processor"></div>
      <div id="component"></div>
      <div id="controller"></div>
      <div id="speaker"></div>
      <div id="whitescreen"></div>
      <div id="glass"></div>
      <div id="glass-gameboy-text">GAME BOY</div>
      <div id="glass-color-text">C</div>
      <div id="screen"></div>
      <div id="screen-gameboy-text">GAME BOY</div>
      <div id="screen-nintendo-text">Nintendo</div>
      <div id="joystick-pad"></div>
      <div id="joystick">.</div>
      <div id="control"></div>
      <div id="control-b" class="control-button">B</div>
      <div id="control-a" class="control-button">A</div>
      <div id="start-select-box"></div>
      <div id="start-select-button"></div>
      <div id="cover-vertical"></div>
      <div id="cover-horizontal"></div>
      <div id="gloss"></div>
      <div id="speaker-holes"></div>
      <div id="power"></div>
    </div>
    <div id="gameboy-frozen-div" style="display: none">
      <img id="gameboy-frozen" src='./images/gameboy_frozen.png'>
    </div>
    <div id="gameboy-screen" style="display: none">
      <div>
        <p id="gameboy-screen-text">Press Enter</p>
      </div>
    </div>

    <!-- ACT 2 -->
    <div id="play-screen" class="shake" style="display: none">
      <div id="play-inner-screen" ></div>
      <div id="play-inner-screen-2"></div>
      <img id="gameboy-light" src='./images/gameboy_light.png'>
      <img id="gameboy-arrows" src='./images/gameboy_arrows.png'>
      <img id="instruct-problem" src='./images/problem_icon.png'>
      <img id="instruct-arrows" src='./images/arrow_keys_solo.png'>
      <img id="instruct-space" src='./images/shift_key_solo.png'>
      <img id="instruct-question" src='./images/question_mark.png'>
      <img id="character" src='./images/pixel-me-antialias.png'>
      <img id="character-celebrate" src='./images/pixel-me-celebrate-antialias.png' style='display: none'>
      <div id="character-text", style='color: brown;'>
        <p class="ml10">
          <span class="text-wrapper">
            <span class="letters">
              Hey Connie here! I'm an engineer turned educator turned entrepreneur, and next year, I will be pursuing an MBA at Stanford Graduate School of Business! I've picked up a few tools along the way, but I seem to have misplaced them... Can you help me find them? <br/>
            </span>
          </span>
        </p>
        <p>
          <span id="enter-intro-btn1" style="color: black !important">(Press Enter to Continue)</span>
        </p>
      </div>
      <div id="end-text", style='display: none'>
        <p class="ml102">
          <span class="text-wrapper2">
            <span class="letters2">
              You've done it, you've found all my tools! Thanks to you, now I have everything I need to change the world of education. Thanks, and until next time!
            </span>
          </span>
        </p>
        <p>
          <span id="enter-intro-btn2" style="color: black !important">(Press Enter to Continue)</span>
        </p>
      </div>
      <div class="main-wrapper" id="mario-wrapper" style='display: none'>
        <canvas class="game-screen"></canvas>
      </div>
    </div>

    <div id="mushroom-message" class="game-message" style='display: none'>
      <p>
        By golly, that's where it is: you’ve found my WRENCH! This was my tool of choice back when I studied mechanical engineering at MIT. My wrench helped me to build all of my greatest ideas. As an engineer, I built assistive technologies like FingerReader, a camera mounted on a ring to help blind people read on-the-go. Engineering sparked my passion for education because I experienced the incredible empowerment that comes from solving problems with real world impact instead of just problems in textbooks. I pivoted to becoming a high school teacher shortly after I graduated, but now I seem to have lost my tools from that time period! Now where are they...

      </p>
      <p id="mushroom-enter">
        (Press Enter to Continue...)
      </p>
    </div>

    <div id="flower-message" class="game-message" style='display: none'>
      <p>
        You’ve done it! You’re found my APPLE! This was a prized gift from one of my students. I started out as a design and engineering teacher at a high school near San Francisco called the Nueva School. There, I taught classes like Making Smart Wearables, Building Balancing Robots, and Designing & Engineering for Social Good. After two years as a teacher, one thing was clear: students needed more time in the school day to be solving problems that they were passionate about and that pushed them to brainstorm creative ideas. I was passionate about bringing that sort of project-based learning experience to all students, so I left my teaching job to start an education nonprofit to democratize innovative learning.
      </p>
      <p id="flower-enter">
        (Press Enter to Continue...)
      </p>
    </div>

    <div id="lightbulb-message" class="game-message" style='display: none'>
      <p>
        You’ve found my LIGHTBULB! Coming up with Project Invent certainly was a lightbulb moment. I realized that by training teachers in design thinking and pairing students with real problems in their community, we could make learning experiences that were exponentially better than what was currently happening in schools. And we could do that at scale. In less than two years, I’ve started Project Invent teams in 30 schools across 14 states, and we’re doubling to 60 schools next year! We’re growing fast and recently raised $400,000 to continue making real, scaleable change.
      </p>
      <p id="lightbulb-enter">
        (Press Enter to Continue...)
      </p>
    </div>

    <div id="hatdegree-message" class="game-message" style='display: none'>
      <p>
        Finally…my MORTARBOARD! I haven’t quite unlocked this one yet, but it won’t be long. In 2020, I will be pursuing an MBA at the Stanford Graduate School of Business, and that means it will be no time until I will be throwing this hat into the air to celebrate my graduate degree. And after that…there are so many possibilities! What I do know is that Stanford will give me a whole new set of tools for my toolbox. I will explore ways to make impact in education through business, policy, technology, and more. The future is an open door! Now let’s get you to that final flag!
      </p>
      <p id="hatdegree-enter">
        (Press Enter to Continue...)
      </p>
    </div>

    <div id="notdone-message" class="game-message" style='display: none'>
      <p>
        Can you find all four items before reaching the flag?
      </p>
      <p id="notdone-enter">
        (Press Enter to Continue...)
      </p>
    </div>

    <!-- ACT 3 -->
    <div id="connie-summary" style='display: none'>
      <div class="banner_wrapper">
        <div class="banner_pic">
          <img src="images/connieawe.png" style="width:90%">
        </div>

        <div id="banner_text">
          <h2> I'm <b>Connie</b>, an entrepreneur designing the future of education. </h2>
          <p> Thanks for playing my game to learn a little more about my journey. As an avid creative and an occasional programmer, I'm glad you were able to explore my story through the world of Javascript and video games. Changing education is my life's work, but it was a winding road to get there. Now, I am excited to pursue an MBA at the Stanford Graduate School of Business to learn even more about making impact in education at scale. If you'd like to learn more about me, please visit <a href="http://www.conniekliu.com" target="_blank"><b><u>conniekliu.com</u></b></a>. That's all for now! </p>
        </div>
      </div>
    </div>
  </div>
  <div id="everything-wrapper-mobile" style='display: none'>
    <div id="banner">
      <div id="intro-header">
        <img id="intro-img" src='./images/first_image.png' />
      </div>
      <div id="banner-img">
        <img src="./images/titlefont.png" alt="image"/>
      </div>
      <div id="banner-text">
        <p style='font-size: 14px;'>
          A platform game exploring the journey of Connie Liu: the engineer turned educator turned entrepreneur.
        </p>
        <p style='font-size: 14px;'>
          <u>Mission:</u> Help Connie disrupt the world of education!
        </p>
        <p style='font-size: 14px;'>
          <u>Instructions:</u> Collect all items by hitting the question blocks. Press "Start" below to begin.
        </p>
        <div id="instructions-div">
          <img id="instructions" src='./images/instructions.png' />
        </div>
      </div>
      <!-- <br /> -->
      <div id="banner-text">
        <p style='color: red; font-size: 14px'>
          For proper viewing, visit this site on your laptop with Chrome in full screen. Make sure your internet is connected.
          But since you're already here, here is a video of what should happen!
        </p>
        <div style="margin:0 auto; padding:20px;">
          <video width="550" height="320" controls>
            <source src="./videos/recording_1080.mp4" type="video/mp4">
          Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>
  <div id="everything-wrapper-bug" style='display: none'>
    <div id="banner">
      <div id="banner-img">
        <img src="./images/titlefont.png" alt="image"/>
      </div>

      <div id="banner-text">
        <p style='font-size: 14px'>
          I'm sorry you are experiencing technical issues!
          If possible, try a different computer!
          But since you're already here, here is a video of what should happen!
        </p>
        <div style="margin:0 auto; padding:20px;">
          <video width="550" height="320" controls>
            <source src="./videos/recording_1080.mp4" type="video/mp4">
          Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>
</body>
<script type="text/javascript">
  // mobile vs nonmobile...

  mobilecheck = function() {
    var check = false;
    (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
    return check;
  };
  mobileAndTabletcheck = function() {
    var check = false;
    (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
    return check;
  };

  // check if on chrome
  chromeCheck = function() {
    // please note,
    // that IE11 now returns undefined again for window.chrome
    // and new Opera 30 outputs true for window.chrome
    // but needs to check if window.opr is not undefined
    // and new IE Edge outputs to true now for window.chrome
    // and if not iOS Chrome check
    // so use the below updated condition
    var isChromium = window.chrome;
    var winNav = window.navigator;
    var vendorName = winNav.vendor;
    var isOpera = typeof window.opr !== "undefined";
    var isIEedge = winNav.userAgent.indexOf("Edge") > -1;
    var isIOSChrome = winNav.userAgent.match("CriOS");

    if (isIOSChrome) {
       // is Google Chrome on IOS
    } else if(
      isChromium !== null &&
      typeof isChromium !== "undefined" &&
      vendorName === "Google Inc." &&
      isOpera === false &&
      isIEedge === false
    ) {
       // is Google Chrome
       return true;
    } else {
       // not Google Chrome
       return false;
    }
  };

  //check internet
  var onInternet = navigator.onLine;

  // If mobile or tablet stop
  let onMobile = mobileAndTabletcheck();
  let onChrome = chromeCheck();
  if (onMobile || !onChrome || !onInternet) {
    $('#everything-wrapper-desktop').hide();
    $('#everything-wrapper-mobile').show();
  } else {
    $('#everything-wrapper-desktop').show();
    $('#everything-wrapper-mobile').hide();
  }

  window.addEventListener("keydown", function(e) {
    if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1){
      e.preventDefault();
    }
  }, false);

  let srcs = [
    "./images/start_yellow.png",
    "./images/start_black.png",
  ];
  let imgs = srcs.map(src => {
    let img = new Image();
    img.src = src;
    return img
  });
  let img = document.getElementById('start-button');
  let current = 0;
  let interval;
  const buttonChange = () => {
    interval = setInterval(() => {
      if (current + 1 > srcs.length - 1) current = 0;
      else current++;
      img.src = imgs[current].src
    }, 500);
  }
  const stop = () => {
    clearInterval(interval);
  }

  var gotMushroom = false;
  var gotFlower = false;
  var gotLightbulb = false;
  var gotHatdegree = false;
  var gotNotdone = false;
  var started = false;
  var startedMario = false;
  var completedEverything = false;

  $( document ).ready(function() {
    buttonChange();
  });

  $( '#start-button' ).click(function() {
    $( '#intro-header' ).hide();
    $( '#start-button' ).remove();
    $( '#start-button-div' ).remove();
    $( '#banner-text' ).hide();
    $( '#gameboy' ).show();

    var gameboy_off = $( "#gameboy" ).offset();
    var screen_width = 180;
    var screen_height = 160;

    setTimeout(function() {
      $( '#gameboy' ).hide();
      $( '#gameboy-frozen-div' ).show();
      $( '#gameboy-screen' ).show();
      $( '#gameboy-screen' ).css({
        top: gameboy_off.top + 60,
        left: gameboy_off.left + 80,
        width: screen_width,
        height: screen_height,
        position:'absolute',
        backgroundColor: '#f0f0f0',
      });
      started = true;
    }, 8000);
    $( '#gameboy-screen-text' ).blink({delay: 500});
  });

  $(document).keypress(function(event){
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if (keycode == '13') {
      if (started) {
        $( '#gameboy-frozen-div' ).hide();
        $( '#gameboy-screen' ).hide();
        $( '#gameboy-screen-text' ).hide();
        started = false;
        startedMario = true;
        $( '#play-screen' ).show();
        startGame();
      } else if (startedMario) {
        window.finishMario = false;
        $('#character').hide();
        $('#character-text').hide();
        $('#charCanvas').hide();
        $('#play-inner-screen-2').css({backgroundColor: 'black'});
        var preloader = new Preloader();
        preloader.init();
        $('#mario-wrapper').show();
        startedMario = false;
      } else if (gotMushroom) {
        $('#mushroom-message').hide();
        gotMushroom = false;
      } else if (gotFlower) {
        $('#flower-message').hide();
        gotFlower = false;
      } else if (gotLightbulb) {
        $('#lightbulb-message').hide();
        gotLightbulb = false;
      } else if (gotHatdegree) {
        $('#hatdegree-message').hide();
        gotHatdegree = false;
      } else if (gotNotdone) {
        $('#notdone-message').hide();
        gotNotdone = false;
      }
      else if (completedEverything) {
        $('#play-screen').hide();
        $('#connie-summary').show();
        completedEverything = false;
      }
    }
  });

  $( '#gameboy-light' ).blink({delay: 500});

  addShake = function(idname) {
    $( idname ).addClass("shake shake-constant");
  };
  removeShake = function(idname) {
    $( idname ).removeClass("shake shake-constant");
  };

  var myGamePiece;
  var firstTimeHitBottom = true;

  function startGame() {
    myGamePiece = new component(30, 100, "red", 220, 0);
    myGameArea.start();
  }

  var myGameArea = {
      canvas : document.createElement("canvas"),
      start : function() {
        this.canvas.width = 520;
        this.canvas.height = 500;
        this.canvas.style.left = '450px';
        this.canvas.style.top = '20px';
        this.canvas.style.position = 'absolute';
        this.canvas.style.zIndex = '6';
        this.canvas.setAttribute("id", "charCanvas");
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 20);
      },
      stop : function() {
        clearInterval(this.interval);
      },
      clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
      }
  }

  var textWrapper = document.querySelector('.ml10 .letters');
  textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

  function component(width, height, color, x, y, type) {
    this.type = type;
    this.width = width;
    this.height = height;
    this.x = x;
    this.y = y;
    this.speedX = 0;
    this.speedY = 0;
    this.gravity = 0.2;
    this.gravitySpeed = 0;
    this.update = function() {
      ctx = myGameArea.context;
      ctx.fillStyle = color;
      var img = document.getElementById("character");
      ctx.drawImage(img, this.x, this.y, 90, 100);
      // }
      // ctx.fillRect(this.x, this.y, this.width, this.height);
    }
    this.newPos = function() {
      this.gravitySpeed += this.gravity;
      this.x += this.speedX;
      this.y += this.speedY + this.gravitySpeed;
      this.hitBottom();
    }
    this.hitBottom = function() {
      var rockbottom = myGameArea.canvas.height - this.height;
      if (this.y > rockbottom) {
        this.y = rockbottom;

        if (firstTimeHitBottom) {
          addShake("#play-inner-screen-2");
          addShake("#gameboy-light");
          addShake("#gameboy-arrows");
          addShake("#instruct-arrows");
          addShake("#instruct-space");
          addShake("#instruct-question");
          firstTimeHitBottom = false;

          setTimeout(function() {
            removeShake("#play-inner-screen-2");
            removeShake("#gameboy-light");
            removeShake("#gameboy-arrows");
            removeShake("#instruct-arrows");
            removeShake("#instruct-space");
            removeShake("#instruct-question");
          }, 1000);

          // appear letter box
          setTimeout(function() {
            $('#character-text').css('color', 'white');
          }, 100);
          $('#enter-intro-btn1').blink({delay: 500});
          anime.timeline({loop: false})
            .add({
              targets: '.ml10 .letter',
              rotateY: [-90, 0],
              duration: 1300,
              delay: (el, i) => 45 * i
            });
        }
      }
    }
  }

  function updateGameArea() {
    myGameArea.clear();
    myGamePiece.newPos();
    myGamePiece.update();
  }

  $('#instruct-problem').click(function() {
    $('#everything-wrapper-mobile').hide();
    $('#everything-wrapper-desktop').hide();
    $('#charCanvas').hide();
    $('#everything-wrapper-bug').show();
  });

  // CODE FOR RESPONSIVENESS
  $( window ).resize(function() {
    if ($('#gameboy-screen').is(":visible")) {
      var screen_pos = $( '#gameboy-frozen' ).offset();
      $( '#gameboy-screen' ).css({
        top: screen_pos.top + 60,
        left: screen_pos.left + 80,
        // width: screen_width,
        // height: screen_height,
        position:'absolute',
        backgroundColor: '#f0f0f0',
      });
    }
    if ($('#charCanvas').is(":visible")) {
      var inner_screen_pos = $( '#play-inner-screen-2' ).offset();
      $( '#charCanvas' ).css({
        top: inner_screen_pos.top / 8,
        left: inner_screen_pos.left - 10,
      });
    }

    var messageIds = [
      '#mushroom-message',
      '#flower-message',
      '#lightbulb-message',
      '#hatdegree-message',
      '#notdone-message',
    ];
    for (var i = 0; i < messageIds.length; i++) {
      if ($( messageIds[i] ).is(":visible")) {
        var cur_height = $( messageIds[i] ).height();
        var cur_width = $( messageIds[i] ).width();
        var screen_off = $( '#play-inner-screen-2' ).offset();
        $( messageIds[i] ).css({
          top: screen_off.top + ($( '#play-inner-screen-2' ).height() - cur_height) / 4,
          left: screen_off.left + ($( '#play-inner-screen-2' ).width() - cur_width) / 2,
        });
      }
    }
  });
</script>
